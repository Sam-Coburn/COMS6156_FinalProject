# README #
+++++++
The OCD Framework
+++++++

## Usage

1. Download the OCD framework from https://github.com/UCL-CREST/OCD/ to your designated directory and extract it.
2. The framework folder should contain the following structure.
.
|---- programs
|---- tests
|---- tests_no_krakatau
|---- tests_no_procyon
|---- scripts
|---- results
| |---- thresholds 
|---- results_no_krakatau 
| |---- thresholds 
|---- results_no_procyon 
| |---- thresholds

3. The programs folder is where you put the code similarity tools being evaluated. The three folders starting with tests contain the OCD data set without compilation/decompilation (tests), the OCD data set with compi- lation/decompilation by Krakatau (tests no krakatau), and the OCD data set with compilation/decompilation by Procyon (tests no procyon). The scripts folder contains tool running scripts and other scripts required for reading the similarity report and compute the error measures. The folders with names starting with results contain similarity reports generated by running a tool on each respective OCD data set. The thresholds folder inside each results folder contains scripts to compute F1 scores, precision- at-n, ARP, and MAP.

4. Create a running script for your tool. You can adapt from an example script of Linux’s diff tool in the **scripts** folder. The actual script can be found in the scripts folder. You are supposed to modify the content of the m compare function to call your tool and derive a similarity value of two given files $1 and $2. Please make sure the tool returns a similarity value from 0 to 100.

5. Change directory to tests folder and run the script. The following example
runs the script of the Linux’s diff tool.

$cd tests 
$../scripts/compare_diff.sh

6. 10,000 pairwise comparisons will be performed by the script (you will see the file names being compared and the similarity score printed to the screen). Once the execution is complete, you will find a similarity report (diff.csv) in the results folder.

$cd ../results
$ls
diff.csv diff.info thresholds/

7. To compute the error measure, both pair-based and query-based ones, change directory to the thresholds folder and execute the scripts. For example, to compute precision, recall, accuracy, and F1 scores, run the all f1.sh script as shown below.

$cd thresholds
$./all_f1.sh
file,T,tp,fp,tn,fn,prec,rec,acc,f1
diff ,8 ,816 ,626 ,8374 ,184 ,0.565880721220527 ,0.816 ,0.919 ,0.6683046683046682


## Research paper

Please visit https://ucl-crest.github.io/OCD/ for the comprehensive summary of the comparison of 30 code similarity analysers.

## Contact

* Chaiyong Ragkhitwetsagul (ucabagk@ucl.ac.uk)
* Jens Krinke (j.krinke@ucl.ac.uk)